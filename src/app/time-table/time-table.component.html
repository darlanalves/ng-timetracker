<ng-container *ngIf="history$ | async as history">
  <h2>History</h2>
  <table class="table">
    <thead>
      <tr>
        <td>date</td>
        <td *ngFor="let category of category$ | async">{{ category.name }}</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let entry of history">
        <td>{{ entry.date }} {{ entry.lastUpdated | date: 'HH:mm' }}</td>
        <td *ngFor="let category of category$ | async" [class.active]="entry.current === category.name">{{ entry[category.name] }}</td>
        <td>{{ entry.total }}h</td>
        <td><button class="btn btn--primary" (click)="remove(entry.date)">&times;</button></td>
      </tr>
    </tbody>
  </table>
  <p class="wrapper">{{ history.length }} items</p>
</ng-container>